// Generated by CoffeeScript 1.7.1
(function() {
  var PixUsers;

  PixUsers = (function() {
    function PixUsers() {}

    PixUsers.prototype.getAccount = function(callback) {
      var data, opts;
      if (pixnet.isLogin) {
        opts = pixnet._extends(pixnet._defaultRequestOption(), opts);
        data = pixnet.getData();
        return pixnet._get('https://emma.pixnet.cc/account', {
          data: {
            access_token: data.app.accessToken
          },
          done: (function(_this) {
            return function(data) {
              if (callback) {
                return callback(JSON.parse(data));
              }
            };
          })(this),
          fail: (function(_this) {
            return function(data) {
              return pixnet.apiInvalidGrantFunc(function() {
                return _this.getAccount(callback);
              }, data);
            };
          })(this)
        });
      } else {
        return pixnet._error('Need login');
      }
    };

    PixUsers.prototype.getUser = function(callback, userid) {
      return pixnet._get("https://emma.pixnet.cc/users/" + userid, {
        done: (function(_this) {
          return function(data) {
            if (callback) {
              return callback(JSON.parse(data));
            }
          };
        })(this),
        fail: (function(_this) {
          return function(data) {
            if (callback) {
              return callback(JSON.parse(data));
            }
          };
        })(this)
      });
    };

    return PixUsers;

  })();

  pixnet.users = new PixUsers();

}).call(this);
